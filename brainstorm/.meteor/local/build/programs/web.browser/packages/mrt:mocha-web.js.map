)]}'
{"version":3,"file":"/packages/mrt:mocha-web.js","sources":["mrt:mocha-web/testReport.html","mrt:mocha-web/testReport.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,oD;AACA,kB;AACA,yF;AACA,I;;AAEA,qD;AACA,kB;AACA,4D;AACA,qD;AACA,iB;AACA,+F;AACA,yD;AACA,6C;AACA,uD;AACA,6C;AACA,wD;AACA,8B;AACA,0B;AACA,8B;AACA,wB;AACA,sB;AACA,wC;AACA,qD;AACA,iB;AACA,mG;AACA,2B;AACA,I;;AAEA,oD;AACA,kB;AACA,8B;AACA,gD;AACA,iB;AACA,gC;AACA,sB;AACA,kD;AACA,sD;AACA,4C;AACA,qD;AACA,mB;AACA,qG;AACA,4B;AACA,iB;AACA,gC;AACA,2B;AACA,yH;AACA,O;AACA,kD;AACA,sD;AACA,wB;AACA,yB;AACA,8B;AACA,yD;AACA,iD;AACA,gD;AACA,mB;AACA,qE;AACA,8E;AACA,yB;AACA,4B;AACA,K;AACA,I;;;;;;;;;;;;;;;;;;;AC9DA,wB;AACA,8B;;AAEA,0B;AACA,yD;AACA,qE;AACA,2D;;AAEA,+D;AACA,iD;AACA,4C;AACA,G;;AAEA,mC;AACA,0B;AACA,iD;AACA,I;;AAEA,yB;AACA,yC;AACA,I;;AAEA,yB;AACA,wB;AACA,mB;AACA,sD;AACA,G;AACA,G;;AAEA,kC;AACA,uB;AACA,wE;AACA,sE;AACA,gC;AACA,I;;AAEA,yB;AACA,+B;AACA,oB;AACA,+B;AACA,oB;AACA,sB;AACA,G;AACA,E","sourcesContent":["\nTemplate.__define__(\"mochaTestReport\", (function() {\n  var view = this;\n  return HTML.Raw('<div class=\"mochaTestReport\">\\n    <div id=\"mocha\"></div>\\n  </div>');\n}));\n\nTemplate.__define__(\"serverTestReport\", (function() {\n  var view = this;\n  return [ HTML.Raw(\"<hr>\\n  \"), Spacebars.With(function() {\n    return Spacebars.call(view.lookup(\"testReport\"));\n  }, function() {\n    return [ \"\\n    \", HTML.H2(\"Server Test Report\"), \"\\n    \", HTML.H3(Blaze.View(function() {\n      return Spacebars.mustache(view.lookup(\"failures\"));\n    }), \" failing, \", Blaze.View(function() {\n      return Spacebars.mustache(view.lookup(\"passes\"));\n    }), \" passing, \", Blaze.View(function() {\n      return Spacebars.mustache(view.lookup(\"pending\"));\n    }), \" pending\"), \"\\n  \" ];\n  }), \"\\n\\n  \", HTML.DIV({\n    \"class\": \"mochaTestReport\"\n  }, \"\\n    \", HTML.UL({\n    id: \"mocha-report\"\n  }, \"\\n      \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"rootSuites\"));\n  }, function() {\n    return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"mochaTestObject\")), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n  \") ];\n}));\n\nTemplate.__define__(\"mochaTestObject\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"suite\"));\n  }, function() {\n    return [ \"\\n    \", HTML.LI({\n      \"class\": \"suite\"\n    }, \"\\n      \", HTML.H1(Blaze.View(function() {\n      return Spacebars.mustache(view.lookup(\"title\"));\n    })), \"\\n      \", Blaze.Each(function() {\n      return Spacebars.call(view.lookup(\"children\"));\n    }, function() {\n      return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"mochaTestObject\")), \"\\n      \" ];\n    }), \"\\n    \"), \"\\n  \" ];\n  }, function() {\n    return [ \"\\n    \", HTML.LI({\n      \"class\": function() {\n        return [ \"test \", Spacebars.mustache(view.lookup(\"stateClass\")), \" \", Spacebars.mustache(view.lookup(\"speed\")) ];\n      }\n    }, \"\\n      \", HTML.H2(Blaze.View(function() {\n      return Spacebars.mustache(view.lookup(\"title\"));\n    }), \" \", HTML.SPAN({\n      \"class\": \"duration\"\n    }, Blaze.View(function() {\n      return Spacebars.mustache(view.lookup(\"duration\"));\n    }), \"ms\")), \"\\n      \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"err\"));\n    }, function() {\n      return [ \"\\n      \", HTML.PRE(HTML.CODE(Blaze.View(function() {\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"err\"), \"stack\"));\n      }))), \"\\n      \" ];\n    }), \"\\n    \"), \"\\n  \" ];\n  });\n}));\n","var MochaWebTests = null\nvar MochaWebTestReports = null\n\nMeteor.startup(function(){\n  MochaWebTests = new Meteor.Collection(\"mochaWebTests\");\n  MochaWebTestReports = new Meteor.Collection(\"mochaWebTestReports\");\n  MochaWebSuites = new Meteor.Collection(\"mochaWebSuites\");\n\n  Meteor.subscribe(\"mochaServerSideTests\", {includeAll: true});\n  Meteor.subscribe(\"mochaServerSideTestReports\");\n  Meteor.subscribe(\"mochaServerSideSuites\");\n});\n\nTemplate.serverTestReport.helpers({\n  failedTests: function(){\n    return MochaWebTests.find({state: \"failed\"});\n  },\n\n  testReport: function(){\n    return MochaWebTestReports.findOne();\n  },\n\n  rootSuites: function(){\n    var rootSuites = [];\n    //TODO add sort\n    return MochaWebSuites.find({parentSuiteId: null});\n  }\n});\n\nTemplate.mochaTestObject.helpers({\n  children: function(){\n    var suites = MochaWebSuites.find({parentSuiteId: this._id}).fetch();\n    var tests = MochaWebTests.find({parentSuiteId: this._id}).fetch();\n    return tests.concat(suites);\n  },\n\n  stateClass: function(){\n    if (this.state == \"passed\")\n      return \"pass\";\n    if (this.state == \"failed\")\n      return \"fail\";\n    return this.state;\n  }\n})\n"]}