<!---##############################################-->
<!---###############OVERALL TEMPLATE###############-->
<!---##############################################-->

<template name="CrowdPromptPage">
  <!-- Nav tabs -->
  <ul class="nav nav-tabs hcomp-prompts-page" role="tablist">
    <li role="presentation" class="active">
      <a href="#promptList" aria-controls="promptList" role="tab" data-toggle="tab">
        Prompts
      </a>
    </li>
    <li role="presentation">
      <a href="#expList" aria-controls="expList" role="tab" data-toggle="tab">
        Experiments
      </a>
    </li>
    <li role="presentation">
      <a href="#dataProcList" aria-controls="dataProcList" role="tab" data-toggle="tab">
        Data Processing
      </a>
    </li>
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">
    {{> PromptsTab }}
    {{> ExperimentsTab }}
    {{> DataProcessingTab }}
  </div> <!-- End tab content container -->

</template>

<template name="PromptsTab">
    <!-- Prompts tab -->
    <div role="tabpanel" class="tab-pane active" id="promptList">
      <div class="row hcomp-prompts-page">
        <center>  
          <button id="new-bs" class="new-bs btn btn-xlarge2 btn-default btn-primary" data-toggle="modal" data-target="#newPromptModal">
            New Brainstorm
          </button> 
        </center>
      </div> <!-- End Row -->

      
      <div class="row hcomp-prompt-list"> 
        {{#each prompts}}
          {{> CrowdBrainstorm }}
        {{/each}}
      </div>
    </div> <!-- End prompts tab -->
  {{> NewPromptModal }}
</template>


<template name="ExperimentsTab">
    <!-- Experiments tab -->
    <div role="tabpanel" class="tab-pane" id="expList">
      <div class="row hcomp-prompts-page">
        <center>
          <button id="new-exp" class="new-exp btn btn-xlarge2 btn-default btn-primary" data-toggle="modal" data-target="#newExpModal">
            New Experiment
          </button> 
        </center>
      </div>
      <!-- End Row -->
      <div class="row hcomp-prompt-list"> 
        {{#each experiments}}
          {{> CrowdExperiment }}
        {{/each}}
      </div>
      <!-- End Row -->
    </div> <!-- End experiments tab -->
    {{> NewExperimentModal }}
</template>

<template name="DataProcessingTab">
  <div role="tabpanel" class="tab-pane" id="dataProcList"> 
    <div class="row hcomp-prompt-list"> 
      {{#each dataSets}}
        {{> DataSummary }}
      {{/each}}
    </div>
  </div> <!-- End experiments tab -->
</template>

<!---##############################################-->
<!---DATA PROCESSING TAB SUB-TEMPLATES--> 
<!---##############################################-->
<template name='DataSummary'>
  <div id="graph-{{_id}}" class="menu-box prompt-panel">
    <div class="row">
      <div class="col-sm-6 prompt-data">
        <div class="center-block">
          <strong>Title:  </strong>
          {{ title }}<br/>
          <strong>Prompt: </strong> {{ question }}<br/>
          <strong>DataForest Clustering URL: </strong> 
          <a href="{{urlFor route='DataForest' data=getData}}">
            {{urlFor route='DataForest' data=getData}}
          </a>
        </div>
      </div>
    </div>
  </div>
</template>

<!---##############################################-->
<!---PROMPTS TAB SUB-TEMPLATES-->
<!---##############################################-->
<template name="NewPromptModal">
      <!-- Modal -->
      <div class="modal fade" id="newPromptModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content"> 
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title" id="newPromptLabel">Create New Brainstorming Prompt</h4>
            </div>
            <div class="modal-body">
              <h5>Brainstorming prompt:</h5>
              <input type="text" id="prompt-text" class="modal-box" placeholder="New Question">
              <h5>Brainstorming title:</h5>
              <input type="text" id="prompt-title" class="modal-box" placeholder="Shortened Brainstorm title">
              <h4>Brainstorm Length(minutes):</h4>
              <input type="number" id="prompt-length" class="modal-number-input" placeholder="minutes">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
              <button id="createPrompt" type="button" class="createPrompt btn btn-primary" data-toggle="modal" data-dismiss="modal">Save</button>
            </div> <!-- End modal footer -->
          </div> <!-- End modal content -->
        </div> <!-- End modal dialog -->
      </div> <!-- End modal -->
</template>

<template name="CrowdBrainstorm">
  <div id="prompt-{{_id}}" class="menu-box prompt-panel">
    <div class="row">
      <div class="col-sm-6 prompt-data">
        <div class="center-block">
          <strong>Title:  </strong>
          {{ title }}<br/>
          <strong>Prompt: </strong> {{ question }}<br/>
          {{#if hasTime}}
            <strong>Session Length: {{ length }} minutes</strong><br/>
          {{/if}}
          <strong>Number of Workers: </strong> {{ numWorkers }}<br/>
          <!--<strong>URL: </strong> {{urlFor route='HcompDashboard' data=_id}} <h3>id: {{_id}}</h3> -->
          {{#with promptID}}
            <strong>Crowd Ideator URL: </strong> 
            <a href="{{urlFor route="CrowdLoginPage"}}">
              {{urlFor "CrowdLoginPage"}}
            </a><br/>
            <strong>Crowd Clustering URL: </strong> 
            <a href="{{urlFor route="MturkSynthLoginPage"}}">
              {{urlFor "MturkSynthLoginPage"}}
            </a>
          {{/with}}
        </div>
      </div>
      <a href="{{formUrl}}{{pathFor route="HcompDashboard" data=getData}}">
        <div class="col-sm-2 dash-button clickable">
          <h3 class="center-vertical">View Brainstorm Progress</h3>
        </div>
      </a>
      <a href="{{formUrl}}{{pathFor route="Visualization" data=getData}}">
        <div class="col-sm-2 review-button clickable">
            <h3 class="center-vertical">Review Ideas</h3>
        </div>
      </a>
      {{#if isNotPrepped }}
        <div class="col-sm-2 prep-forest clickable">
          <h3 class="center-vertical">Prep Data Forest</h3>
        </div>
      {{/if}}
      <!-- <a href="">
        <div class="col-sm-2 create-exp-button clickable">
            <h3 class="center-vertical">Create Experiment</h3>
        </div>
      </a> -->
    </div>
  </div>
</template>

<!---##############################################-->
<!---EXPERIMENTS TAB SUB-TEMPLATES-->
<!---##############################################-->

<template name="NewExperimentModal">
  <!-- Large modal -->
  <div class="modal fade" id="newExpModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title" id="newExpLabel">Create New Experiment</h4>
        </div>
        <div class="modal-body">
          
          <h5>Experiment name:</h5>
          <input type="text" id="exp-title" class="modal-box" placeholder="Experiment name">
          
          <h5>Choose brainstorming prompt:</h5>
          <div class="exp-prompt-list">
            {{#each prompts}}
              {{> ExperimentPromptItem }}
            {{/each}}
          </div>

          <h5>Target number of participants per condition</h5>
          <input type="number" id="num-parts" class="modal-number-input" placeholder="participants">

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button id="createExp" type="button" class="createExp btn btn-primary" data-toggle="modal" data-dismiss="modal">Save</button>
        </div> <!-- End modal footer -->
      </div>
    </div>
  </div>
</template>

<template name="ExperimentPromptItem">
  <div id="prompt-{{this._id}}" class="radio exp-prompt-item col-xs-8">
    <label><input type="radio" name="promptRadios" id="promptRadios-{{this._id}}" value="{{this._id}}">
      {{ this.title }} ({{ timeLimit }})
    </label>
  </div>
</template>

<template name="CrowdExperiment">
  <div id="exp-{{_id}}" class="menu-box prompt-panel">
    <div class="row">
      <div class="col-sm-8 prompt-data">
        <div class="center-block">
          <strong>Description:  </strong>
          {{ desc }}<br/>
          <strong>Prompt: </strong> {{ question }}<br/>
          <strong>Time limit: </strong> {{ timeLimit }}<br/>
          <strong>Target Number of Participants per Condition: </strong> 
            {{ partNumber }}<br/>
          <strong>Participant login URL: </strong> 
            <a href="{{ expURL }}">{{ expURL }}</a><br/>
          <!-- <strong>Conditions: </strong><br/> -->
          {{#each conditions}}
            {{> CrowdExperimentCondition }}
          {{/each}}
        </div>
      </div>
    <a href="{{formUrl}}{{pathFor route="ExpDashboard" data=getData}}">
      <div class="col-sm-2 exp-dash-button clickable">
        <h3 class="center-vertical">Facilitate Brainstorm</h3>
      </div>
    </a>
    </div>
  </div>
</template>

<template name="CrowdExperimentCondition">
  <div id="cond-{{_id}}" class="menu-box prompt-panel">
    <div class="row">
      <div class="col-sm-6 prompt-data">
        <div class="center-block">
          <strong>{{ desc }}:</strong><br/> 
          {{ numAssigned }} assigned participants, {{numBegan}} started experiment, {{ numCompleted }} completed.<br/>
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="{{readyProgress}}" aria-valuemin="0" aria-valuemax="100" style="width:{{readyProgress}}%;">
              {{readyProgress}}% ready
            </div>
          </div>
          <div class="btn btn-default btn-primary begin-bs">
            Begin experiment
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
