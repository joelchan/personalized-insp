<template name="Forest">
<h1 class="page-header" id="clusterprompt">{{ prompt }}</h1>
	<div id="forest" class="row forest">
    <!-- <div id="class="row"> -->
			<!--IdeaList and Node Starter-->
		  <div id="ideas" class="col-md-3">
          {{> ForestCreateCluster }}
          {{> ForestIdeaList }}
			  <!--Node Builder-->
        <!-- {{> ForestNodeBuilder }} -->
			  <!--End-->
		  </div>
      
        <!-- {{> ForestNodeStatus }} -->
			<!--End-->

      {{> ForestBestMatch }}
      {{> ForestGeneralize }}
      <!-- </div> -->
	</div>
	<!--End Container-->
  {{> ForestNodeName }}
  {{> ForestConfirm }}

</template>

<template name="ForestBestMatch">
	<!--Children of Best Match Node-->
	<div id="tree" class="col-md-6">
		<h3>{{userPrompt}}</h3>
		{{#each bestMatchChildren}}
			<ul class="donestack " id={{this}}>
				<i class="fa fa-angle-double-down sort-disabled"></i>
				<label class="sort-disabled">{{myName}}</label>
				{{#each clusterIdeas}}
					<li id={{_id}} class="idea-item">{{content}}</li>
				{{/each}}
				{{#each clusterChildren}}
					<li id={{this}} class="cluster-item">{{clusterName}}</li>
				{{/each}}
				</ul>
		{{/each}}
		{{#if isBestMatch}}
			<button id="bmback" class='btn btn-large btn-default'>Back</button>
			<a href="#" id="nomatch" class='btn btn-large btn-primary' data-toggle="modal" data-target="#confirmModal">No Good Matches</a>
		{{/if}}
	</div>
	<!--End-->
</template>

<template name="ForestGeneralize">
	<!--Generalization Option Buttons-->
	<div id="generalize" class="col-md-6">
		<h3>{{userPrompt}}</h3>
		<a href="#" id="both" class='btn btn-large btn-primary' 
			data-toggle="modal" data-target="#confirmModal">Merge</a>
		<p>If both nodes generalize each other, click 'Merge'. This creates one node out of the idea node and the best match node at the location of the best match node. The new name will be [Name of Best Match]+[Name of Node to be Inserted].</p>
		<a href="#" id="neither" class='btn btn-large btn-primary'
			data-toggle="modal" data-target="#nameModal">Create Artificial Node</a>
		<p>If the nodes are related, but neither generalizes the other, click 'Create Artificial Node'. This will become the parent of both nodes, and you will be asked to provide a name that captures the missing semantic content</p>
		<button id="ideanode" class='btn btn-large btn-primary'>Idea node is parent</button>
		<p>If the idea node is more general than the best match node, click 'Idea Node is Parent'. This sets the idea node as the parent of the best match node.</p>
		<button id="bestnode" class='btn btn-large btn-primary'>Best Match Node is Parent</button>
		<p>If the idea node is more general than the best match node, click 'Best Match Node is Parent'. This sets the the best match node as the parent of the idea node.</p>
		<button id="genback" class='btn btn-large btn-default'>Back</button>
	</div>
	<!--End-->
</template>

<template name="ForestCreateCluster">
	<div id="createnode"><h3>Create a New Cluster</h3>
		<ul class="newstack" id="node-drag-target">
	  	Drag idea here to create a new cluster
		</ul>
	</div>
</template>

<template name="ForestIdeaList">
  <div id="unclustered-ideas">
	  <h3>Idea List</h3>
	  <ul id="idealist" class="deck">
		  <li class="sort-disabled"></li>
		  {{#each ideaClusters}}
        {{> PreforestIdeaCluster }}
		  {{/each}}
	  </ul>
  </div>
</template>

<template name="PreforestIdeaCluster">
  {{#each ideas}}
    {{> ForestIdea }} 
  {{/each}}
</template>

<template name="ForestNodeBuilder">
	<div id="buildcluster" class="col-md-3">
		<h3>Add to Cluster</h3>
    <div id={{ideaNode}} class="form-group">
			<label class="sort-disabled">Cluster Name:
			  <span id="clusterlabel" class="sort-disabled">{{ideaNodeName}}</span>
			</label>
			<input type="text" class="clusternodename form-control input-sm sort-disabled" 
				id="namecluster" placeholder="Name this cluster">
		  <ul id={{ideaNode}} class="stack">
			  {{#each ideaNodeIdeas}}
          {{> ForestIdea }}
			  {{/each}}
        <li class="forest-idea-placeholder">Insert other ideas here</li>
		  </ul>
		</div>
		<button id='finish' class='btn btn-large btn-primary'>Finished</button>
	</div>
</template>

<template name="ForestNodeStatus">
	<!--Idea Node and Best Match Node Status-->
	<div id="nodestatus" class="col-md-6">
		<h3>Working Nodes</h3>
		<h4>Node to be Inserted</h4>
		<ul id={{ideaNode}} class="ideanode donestack">
			<i class="fa fa-angle-double-down sort-disabled"></i>
			<label class="sort-disabled">
				<span class="named sort-disabled">{{ideaNodeName}}</span>
			</label>
			{{#each ideaNodeIdeas}}
				<li id={{_id}} class="idea-item">{{content}}</li>
			{{/each}}
			{{#each clusterChildren}}
				<li id={{this}} class="cluster-item">{{clusterName}}</li>
			{{/each}}
		</ul>
		<h4>Best Match Node</h4>
		<ul id={{bestMatchNode}} class="bestmatch donestack">
			<i class="fa fa-angle-double-down sort-disabled"></i>
			<label class="sort-disabled">
				<span id="bmname" class="sort-disabled">{{bestMatchName}}</span>
			</label>
			{{#each bestMatchIdeas}}
				<li id={{_id}} class="idea-item">{{content}}</li>
			{{/each}}
			{{#each clusterchildren}}
				<li id={{this}} class="cluster-item">{{clustername}}</li>
			{{/each}}
		</ul>
	</div>
</template>

<template name="ForestNodeName">
	<!--Artificial Node Naming Modal-->
	<div class="modal fade" id="nameModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    	<div class="modal-dialog">
        	<div class="modal-content"> 
          		<div class="modal-header">
            		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
           			<h4 class="modal-title" id="myModalLabel">Name Artificial Node</h4>
           		</div>
           		<div class="modal-body">
              		<div class="input-group">
              			<span class="input-group-addon">Name of Articial Node</span>
              			<input type="text" class="form-control" id="artificial-name">
              		</div>
              		<h4>Be sure to try and capture the semantic content of both clusters with your new name. There is no maximum length.</h4>
              		<div id="nameWarning"></div>
              	</div>
           		<div class="modal-footer">
               		<button type="button" class="btn btn-default" 
               			data-dismiss="modal">Close</button>
             		<button type="button" class="btn btn-primary" 
             			id="save-name" data-dismiss="modal">Make Node</button>
       			</div>
    		</div>
  		</div>
	</div>
	<!--End-->
</template>

<template name="ForestConfirm">
	<!--Confirm Action Modal-->
	<div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    	<div class="modal-dialog">
        	<div class="modal-content"> 
          		<div class="modal-header">
            		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	       			<h4 class="modal-title" id="myModalLabel">Confirm</h4>
    	  		</div>
     		 	<div class="modal-body">
        			<h3>Are you sure?</h3>
	      		</div>
    	  		<div class="modal-footer">
        			<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        			<button id="yes" type="button" class="btn btn-primary" data-dismiss="modal">Yes, I'm Sure</button>
	      		</div>
    		</div>
  		</div>
	</div>
</template>

<template name="ForestIdea">
  <li class="forest-idea-item">{{content}}</li>
</template>

<template name="ForestIdeaNode">
</template>
